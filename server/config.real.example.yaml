server:
  host: 0.0.0.0
  port: 8000

llm:
  enabled: true
  api_base: https://generativelanguage.googleapis.com/v1beta/openai
  api_key: "${GEMINI_API_KEY}"
  model: gemini-3-flash-preview
  timeout_seconds: 120

asr:
  mode: faster_whisper
  device: cpu
  model_size: base
  language: zh

bilibili:
  max_video_minutes: 240
  yt_dlp_path: yt-dlp
  ffmpeg_path: ffmpeg

runtime:
  temp_dir: .tmp
  log_level: INFO

xiaohongshu:
  # 可选：mock / web_readonly
  # - mock: 使用本地示例数据（最安全）
  # - web_readonly: 只读请求网页端接口（需手动配置 request_url/headers）
  mode: web_readonly
  cookie: ""
  collection_id: ""
  default_limit: 20
  max_limit: 30
  random_delay_min_seconds: 3.0
  random_delay_max_seconds: 10.0
  circuit_breaker_failures: 3
  min_live_sync_interval_seconds: 1800
  db_path: .tmp/midas.db
  request_timeout_seconds: 30
  api_base: ""
  mock_notes_path: ""
  web_readonly:
    # 从浏览器 DevTools 里复制“收藏列表”请求 URL（建议只读接口），放到 .env 的 XHS_REQUEST_URL。
    request_url: "${XHS_REQUEST_URL}"
    request_method: GET
    # 涉及隐私字段，统一从 .env 注入。
    request_headers:
      Accept: "${XHS_HEADER_ACCEPT}"
      Cookie: "${XHS_HEADER_COOKIE}"
      Origin: "${XHS_HEADER_ORIGIN}"
      Referer: "${XHS_HEADER_REFERER}"
      User-Agent: "${XHS_HEADER_USER_AGENT}"
      X-S: "${XHS_HEADER_X_S}"
      X-S-Common: "${XHS_HEADER_X_S_COMMON}"
      X-T: "${XHS_HEADER_X_T}"
    request_body: ""
    har_capture_path: .tmp/xhs_detail.har
    # auto: 列表正文不足时再请求详情；always: 总是请求详情；never: 只用列表
    detail_fetch_mode: auto
    # 可选：详情接口模板，支持 {note_id} / {xsec_token}
    detail_request_url_template: ""
    detail_request_method: GET
    detail_request_headers: {}
    detail_request_body: ""
    # 以下字段按你的实际响应结构调整
    items_path: data.notes
    note_id_field: note_id
    title_field: title
    content_field_candidates: [desc, content, note_text]
    image_field_candidates: [cover.url_pre, cover.url_default, cover.info_list, image_list, images]
    detail_content_field_candidates: [data.items.0.note_card.desc, data.items.0.note_card.note_display_title, data.note.desc, data.note.note_desc]
    detail_image_field_candidates: [data.items.0.note_card.image_list, data.items.0.note_card.images_list, data.note.image_list, data.note.images]
    source_url_field: url
    max_images_per_note: 6
    host_allowlist: [www.xiaohongshu.com, edith.xiaohongshu.com]
