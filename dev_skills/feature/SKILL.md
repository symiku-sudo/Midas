---
name: feature
description: 在 Midas 中实现新功能或增强能力。适用于新增接口、扩展服务流程、增加配置项、补充客户端/服务端能力。
---

# Feature（功能开发）

## 必须流程
1. 复述目标与 DoD。
2. 给出计划：改哪些文件、如何验证、风险点。
3. 小步实现，优先复用现有模块。
4. 为核心逻辑补测试（接口级或服务级至少一个）。
5. 运行验证并记录结果。
6. 同步文档后提交。

## Midas 约束
- 不破坏既有 API 协议与错误码语义。
- 新增配置项必须写入 `config.example.yaml` 与 `config.yaml`。
- 若新增接口或响应字段，必须更新：
  - `server/API_CONTRACT.md`
  - `server/README.md`
- 影响使用方式时，必须更新根 `README.md`。
- 涉及数据持久化时必须保护备份目录：默认不得删除/覆盖 `server/.tmp/backups/` 下的 `.db` 备份文件（含 `*_latest.db`）。

## 最低交付
- 代码改动
- 对应测试
- 文档更新
- commit 信息

## 评分/召回特定 DoD
- 当新增或改动评分/召回/候选推荐逻辑时，DoD 必须额外满足：
1. 提供离线评估报告（至少包含阈值扫描与前后指标对比）。
2. 提供人审样本对照集，并说明阈值最终选择理由。
3. 增加回归样本测试，覆盖至少 1 个历史漏检样本与 1 个误报样本。
